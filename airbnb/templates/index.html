<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Mapbox Harita ve Ä°statistikler</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script type="text/javascript" src="http://www.chartjs.org/assets/Chart.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        const APP_VAR = {
            access_token:'{{ mapbox_access_token }}',
            neighbourhood_json: {{ neighbourhoods|tojson|safe }},
            points: {{ points|tojson|safe }},
            bbox: {{ neighbourhoods_bbox|tojson|safe }},
            accommodations: {{accommodates}},
            prices: {{price}}
        }
    </script>
    <script type="text/javascript" src="{{ url_for('static',filename='map.js') }}" defer></script>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}">

</head>
<body>
<div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="navbar">
        <a class="navbar-brand" href="#" id="set_bbox">ISTANBUL AIRBNB PREDICTION APP</a>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" id="heatmapBtn">Heatmap</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="clusterBtn">Clustering</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="predictBtn">Prediction</a>
                </li>
                <li class="nav-item" id="filter">
                    <div>
                        <select id="select-district">
                            <option selected disabled id="selected">Filter by District</option>
                                {% for labels in neighbourhoods_labels %}
                                    <option value="{{ labels }}">{{ labels }}</option>
                                {% endfor %}
                        </select>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div id='map'></div>
<div id="form-div"><form method="POST">
    <table>
      <tr>
        <td><label for="district">Neigbourhood:</label></td>
        <td>
          <select id="district" name="district" style="width: 70px;">
            <option selected disabled hidden></option> {% for i in neighbourhoods_labels %} <option value="{{ i }}">{{ i }}</option> {% endfor %}
          </select>
        </td>
        <td><label for="property_types">Property Type:</label></td>
        <td>
          <select id="property_types" name="property_types" style="width: 70px;">
            <option selected disabled hidden></option> {% for i in property_types %} <option value="{{ i }}">{{ i }}</option> {% endfor %}
          </select>
        </td>
      </tr>
      <tr>
        <td><label for="room_types">Room Type:</label></td>
        <td>
          <select id="room_types" name="room_types" style="width: 70px;">
            <option selected disabled hidden></option> {% for i in room_types %} <option value="{{ i }}">{{ i }}</option> {% endfor %}
          </select>
        </td>
        <td><label for="bathroom_types">Bathroom Type:</label></td>
        <td>
          <select id="bathroom_types" name="bathroom_types" style="width: 70px;">
            <option selected disabled hidden></option> {% for i in bathroom_types %} <option value="{{ i }}">{{ i }}</option> {% endfor %}
          </select>
        </td>
      </tr>
        <tr>
        <td><label for="bathroom_types">Host Response Time:</label></td>
        <td>
          <select id="response_time" name="response_time" style="width: 70px;">
            <option selected disabled hidden></option> {% for i in host_response_times %} <option value="{{ i }}">{{ i }}</option> {% endfor %}
          </select>
        </td>
        </tr>
      <tr>
        <td><label for="accommodates">Accommodates:</label></td>
        <td><input type="number" id="accommodates" placeholder="2" name="accommodates" min="0" style="width: 70px;"></td>
        <td><label for="bedrooms">Bedrooms:</label></td>
        <td><input type="number" id="bedrooms" placeholder="1" name="bedrooms" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="minimum_night">Minimum Night:</label></td>
        <td><input type="number" id="minimum_night" placeholder="1" name="minimum_night" min="0" style="width: 70px;"></td>
        <td><label for="beds">Beds:</label></td>
        <td><input type="number" id="beds" placeholder="1" name="beds" min="0" style="width: 70px;"></td>
      <tr>
      <tr>
        <td><label for="availability_30">Availability 30:</label></td>
        <td><input type="number" id="availability_30" placeholder="15"name="availability_30" min="0" style="width: 70px;"></td>
        <td><label for="bathroom">Bathroom:</label></td>
        <td><input type="number" id="bathroom" placeholder="1" name="bathroom" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="availability_365">Availability 365:</label></td>
        <td><input type="number" id="availability_365" placeholder="150" name="availability_365" min="0" style="width: 70px;"></td>
        <td><label for="nlisting">Number of Listings:</label></td>
        <td><input type="number" id="nlisting"  placeholder="1" name="nlisting" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="number_of_score">Number of Reviews:</label></td>
        <td><input type="number" id="number_of_score" placeholder="50" name="number_of_score" min="0" style="width: 70px;"></td>
        <td><label for="reviewscore">Review Score:</label></td>
        <td><input type="number" id="reviewscore" placeholder="1-5" name="reviewscore" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="accuracyscore">Accuracy Score:</label></td>
        <td><input type="number" id="accuracyscore" placeholder="1-5" name="accuracyscore" min="0" style="width: 70px;"></td>
        <td><label for="cleanliness">Cleanliness Score:</label></td>
        <td><input type="number" id="cleanliness" placeholder="1-5" name="cleanliness" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="interactionscore">Interaction Reviews:</label></td>
        <td><input type="number" id="interactionscore" placeholder="1-5" name="interactionscore" min="0" style="width: 70px;"></td>
        <td><label for="locationscore">Location Score:</label></td>
        <td><input type="number" id="locationscore" placeholder="1-5" name="locationscore" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="checkinscore">Checkin Score:</label></td>
        <td><input type="number" id="checkinscore" placeholder="1-5" name="checkinscore" min="0" style="width: 70px;"></td>
        <td><label for="valuescore">Value Score:</label></td>
        <td><input type="number" id="valuescore"  placeholder="1-5"name="valuescore" min="0" style="width: 70px;"></td>
      </tr>
      <tr>
        <td><label for="hostsince">Host Since:</label></td>
        <td><input type="number" id="hostsince" placeholder="100days" name="hostsince" min="0" style="width: 70px;"></td>
        <td><label for="responserate">Response Rate:</label></td>
        <td><input type="number" id="responserate" placeholder="1-5" name="responserate" min="0" style="width: 70px;"></td>
      </tr>
    </table><br>
    <button type="submit" class="btn btn-primary" style="font-size: x-small; text-align: center;">Submit</button>
  </form></div>

<div id='stats'>
    <h3 style="text-align:center">Statistics</h3>
    <canvas id="accommodates_price_chart"></canvas>
    <hr>
    <canvas id="room_type_chart"></canvas>
</div>
</body>
</html>
